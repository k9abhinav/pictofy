<%- include('./partials/header.ejs') %>
<div class="w-full min-h-screen bg-zinc-800 px-14 text-white">
    <div class="cards flex flex-wrap gap-10 ">
        <% posts.forEach(function(elem){ %>
            <div class="card w-48  rounded-lg overflow-hidden">
                <a href="/post/<%= elem._id %>">
                    <div class="w-full h-48 bg-zinc-600 rounded-lg mt-10 overflow-hidden">
                        <img class="w-full h-full object-cover" src="/images/uploads/<%= elem.image %>" alt="Post Image">
                    </div>
                    <h5 class="font-semibold text-xs mt-4"><%= elem.title %></h5>
                    <h6 class="font-medium text-xs mt-1">@<%= elem.user.username %></h6>
                </a>

                <!-- Like/Unlike button -->
                <div class="like-section pt-1">
                    <% if (elem.likes.includes(user._id)) { %>
                        <form action="/post/<%= elem._id %>/unlike" method="POST">
                            <button type="submit" class="bg-red-500 text-white py-1 px-3 rounded">Unlike</button>
                        </form>
                    <% } else { %>
                        <form action="/post/<%= elem._id %>/like" method="POST">
                            <button type="submit" class="bg-green-500 text-white py-1 px-3 rounded">Like</button>
                        </form>
                    <% } %>
                    <p>Likes: <%= elem.likes.length %></p>
                </div>
            </div>
        <% }) %>
    </div>
</div>
<%- include('./partials/footer.ejs') %>
